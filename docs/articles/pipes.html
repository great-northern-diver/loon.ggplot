<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pipes • loon.ggplot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Pipes">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">loon.ggplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ggplots2loon.html">ggplots --&gt; loon plots</a>
    </li>
    <li>
      <a href="../articles/loon2ggplots.html">loon plots --&gt; ggplots</a>
    </li>
    <li>
      <a href="../articles/pipes.html">Pipes</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Pipes</h1>
                        <h4 class="author">Wayne Oldford and Zehao Xu</h4>
            
            <h4 class="date">2020-05-26</h4>
      
      
      <div class="hidden name"><code>pipes.Rmd</code></div>

    </div>

    
    
<p>The <code>magrittr</code> package provides several different types of pipes which can be a handy way to organize computation, especially when the computation involves processing data for input to another procedure, in this case <code>ggplot()</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)  <span class="co"># load this to also have dplyr functionality</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-3" title="3">p1_piped &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">transmission =</span> am, <span class="dt">weight =</span> wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lp100km =</span> (<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="fl">3.785411784</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">1.609344</span> <span class="op">*</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="st">  </span><span class="kw">select</span>(weight, lp100km) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> weight, <span class="dt">y =</span> lp100km)) <span class="op">+</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Litres per 100 kilometres"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"Gas usage"</span>)</a></code></pre></div>
<p>Here the “pipe” <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> takes the output of its left hand side and pushes it into the first argument of its right hand side. Arbitrary many pipes may be gathered together.<br>
This connects nicely with <code>ggplot2</code>’s addition <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator (<code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> itself is sometimes a pipe, sometimes a layer in <code>ggplot</code> construction) to create the <code>ggplot</code> from the data and assign it to <code>p1_piped</code>.</p>
<p>Two things to note here are. First, the result of the data manipulation is assigned at the beginning using the <code>&lt;-</code> assignment function which seems to run counter to the data flow indicated by the pipes. A more consistent flow would be to have instead written</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">transmission =</span> am, <span class="dt">weight =</span> wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lp100km =</span> (<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="fl">3.785411784</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">1.609344</span> <span class="op">*</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="st">  </span><span class="kw">select</span>(weight, lp100km) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> weight, <span class="dt">y =</span> lp100km)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Litres per 100 kilometres"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"Gas usage"</span>)  -&gt;<span class="st">   </span><span class="co"># Note assignment occurs here</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="st">  </span>p1_piped</a></code></pre></div>
<p>Now the assignment operator <code>-&gt;</code> is used at the end, matching the data flow of the pipes.</p>
<p>Second, in either case the <code>ggplot</code> is <strong>not</strong> itself displayed (or rendered) until it is printed.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">p1_piped</a></code></pre></div>
<p><img src="pipes_files/figure-html/p1_piped-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>Once built, as happens when the plot has been displayed as above, an interactive loon plot can be had as always, simply by calling <code><a href="../reference/ggplot2loon.html">ggplot2loon()</a></code> on the built <code>ggplot</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(loon.ggplot)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span>(p1_piped, <span class="dt">linkingGroup =</span> <span class="st">"Motor Trend 1974"</span>)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; [1] ".l0.ggplot.plot"</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt; attr(,"class")</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; [1] "l_plot" "loon"</span></a></code></pre></div>
<p>Again, the additional specification here of the <code>linkingGroup</code> will cause display attributes to be pulled from the plots in that linking group.</p>
<div id="using-gg_pipedata-ggplotobj" class="section level3">
<h3 class="hasAnchor">
<a href="#using-gg_pipedata-ggplotobj" class="anchor"></a>Using <code>gg_pipe(data, ggplotObj)</code>
</h3>
<p>Note that before a <code>ggplot</code> can be displayed, a number of steps are performed so as to prepare the plot object for rendering (e.g. see <code><a href="https://ggplot2.tidyverse.org/reference/ggplot_build.html">ggplot2::ggplot_build</a></code>). Unfortunately, this delay in completing the preparation of the <code>ggplot</code> can make it difficult to attach further operations in the <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> pipeline after the <code>ggplot</code> itself – apart of course from further <code>ggplot2</code> additions via the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator. For example, one cannot simply add <code>%&gt;% ggplot2loon()</code> at the end of the pipeline used to construct the <code>ggplot</code>. That is,</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">transmission =</span> am, <span class="dt">weight =</span> wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lp100km =</span> (<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="fl">3.785411784</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">1.609344</span> <span class="op">*</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">select</span>(weight, lp100km) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> weight, <span class="dt">y =</span> lp100km)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Litres per 100 kilometres"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"Gas usage"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="st">  </span><span class="kw"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span>()</a></code></pre></div>
<p>would produce neither a <code>ggplot</code> or an interactive <code>loon</code> plot.</p>
<p>To get around this problem, in <code>loon.ggplot</code> the function <code><a href="../reference/gg_pipe.html">gg_pipe()</a></code> is provided to encapsulate the <code>ggplot</code> construction in any pipeline and force the <code>ggplot</code> to be built (though not rendered in a display). The output of this function can then be passed on to <code><a href="../reference/ggplot2loon.html">ggplot2loon()</a></code>.</p>
<p>For example,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">transmission =</span> am, <span class="dt">weight =</span> wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lp100km =</span> (<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="fl">3.785411784</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">1.609344</span> <span class="op">*</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="kw">select</span>(weight, lp100km) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span><span class="co"># encapsulate the ggplot construction with gg_pipe()</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/gg_pipe.html">gg_pipe</a></span>(<span class="kw">ggplot</span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> weight, <span class="dt">y =</span> lp100km)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">            </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="st">            </span><span class="kw">ylab</span>(<span class="st">"Litres per 100 kilometres"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="st">            </span><span class="kw">ggtitle</span>(<span class="st">"Gas usage"</span>)</a>
<a class="sourceLine" id="cb6-10" title="10">          )  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="st">  </span><span class="co"># and pass the built plot on</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="st">  </span><span class="kw"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span>(<span class="dt">linkingGroup =</span> <span class="st">"Motor Trend 1974"</span>)</a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt; [1] ".l1.ggplot.plot"</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">#&gt; attr(,"class")</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt; [1] "l_plot" "loon"</span></a></code></pre></div>
<p>constructs the interactive plot which could have been assigned to a variable as was done with the original <code>ggplot</code> construction.</p>
<p>From here, the pipeline can be grown as before, recognizing of course that the output of <code><a href="../reference/ggplot2loon.html">ggplot2loon()</a></code> is a <code>loon</code> plot of some sort. This means that functions that operate on <code>loon</code> plots (as their first argument can be used. As with any piping operation, attention must be given to the first argument of the functions in the pipeline as well as to what the input and outputs are of any function.</p>
<p>For example,</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(magrittr)</a>
<a class="sourceLine" id="cb7-2" title="2">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">transmission =</span> am, <span class="dt">weight =</span> wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lp100km =</span> (<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="fl">3.785411784</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">1.609344</span> <span class="op">*</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="st">  </span><span class="kw">select</span>(weight, lp100km) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="st">  </span><span class="co"># encapsulate the ggplot construction with gg_pipe()</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="st">  </span><span class="kw"><a href="../reference/gg_pipe.html">gg_pipe</a></span>(<span class="kw">ggplot</span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> weight, <span class="dt">y =</span> lp100km)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="st">            </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="st">            </span><span class="kw">ylab</span>(<span class="st">"Litres per 100 kilometres"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="st">            </span><span class="kw">ggtitle</span>(<span class="st">"Gas usage"</span>) )  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="st">  </span><span class="co"># and pass the built plot on</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="st">  </span><span class="kw"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span>(<span class="dt">linkingGroup =</span> <span class="st">"Motor Trend 1974"</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># pipe the loon plot on</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="st">  </span><span class="kw">l_cget</span>(<span class="st">'color'</span>)  <span class="co"># Gets and returns the vector of point colours</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt;  [1] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt;  [5] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt;  [9] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">#&gt; [13] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co">#&gt; [17] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="co">#&gt; [21] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="co">#&gt; [25] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="co">#&gt; [29] "#000000000000" "#000000000000" "#000000000000" "#000000000000"</span></a></code></pre></div>
<p>In the <code>magrittr</code> package (the source of the pipeline operation) there are a variety of pipeline operators which might also be useful – not just <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code>.</p>
</div>
<div id="using-lggplot" class="section level3">
<h3 class="hasAnchor">
<a href="#using-lggplot" class="anchor"></a>Using <code>lggplot()</code>
</h3>
<p>Additionally, using function <code>lggplot</code>, can also create a <code>loon</code> plot with <code>ggplot</code> pipe model.</p>
<p>The display of <code>ggplot</code> object relies on the default <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function in <code>R</code>. Function <code>lggplot</code>, inserts a new class <code>lggplot</code> into the original <code>ggplot</code> object. At the printing time, <a href="http://adv-r.had.co.nz/S3.html">S3 method</a> <code><a href="../reference/print.lggplot.html">print.lggplot()</a></code> will be executed to transform a <code>ggplot</code> plot to a <code>loon</code> plot.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">obj &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">transmission =</span> am, <span class="dt">weight =</span> wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lp100km =</span> (<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="fl">3.785411784</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">1.609344</span> <span class="op">*</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">select</span>(weight, lp100km) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="st">  </span><span class="co"># replace `ggplot` to `lggplot`</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/lggplot.html">lggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> weight, <span class="dt">y =</span> lp100km)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Litres per 100 kilometres"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"Gas usage"</span>)</a>
<a class="sourceLine" id="cb8-10" title="10">obj</a></code></pre></div>
<p>However, this design has an obvious drawback: confusion of the output data structure. Since the transformation is accomplished at the printing time, object <code>obj</code> is still a <code>ggplot</code> data structure. To create a <code>loon</code> “handle”, we have to use <code>l_getFromPath()</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="cf">if</span>(utils<span class="op">::</span><span class="kw"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span>(<span class="st">"loon"</span>) <span class="op">&gt;=</span><span class="st"> "1.2.4"</span>) {</a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="co"># **THIS IS IMPORTANT**</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="co"># The path name can be obtained at the top left tk window</span></a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="co"># Suppose the label is "loon.ggplot --path: .l13.ggplot"</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="co"># The path would be the char right after "path: " which is ".l13.ggplot"</span></a>
<a class="sourceLine" id="cb9-6" title="6">  loonWidget &lt;-<span class="st"> </span><span class="kw">l_getFromPath</span>(<span class="st">".l13.ggplot"</span>)</a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(loonWidget)</a>
<a class="sourceLine" id="cb9-8" title="8">  <span class="co"># [1] "l_plot" "loon"</span></a>
<a class="sourceLine" id="cb9-9" title="9">}</a></code></pre></div>
</div>
<div id="just-use-loon-for-built-in-interactive-plots" class="section level3">
<h3 class="hasAnchor">
<a href="#just-use-loon-for-built-in-interactive-plots" class="anchor"></a>Just use loon for built-in interactive plots</h3>
<p>Of course, for plots already existing in <code>loon</code>, <code>ggplot()</code> and hence <code><a href="../reference/gg_pipe.html">gg_pipe()</a></code> could be avoided entirely:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">transmission =</span> am, <span class="dt">weight =</span> wt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lp100km =</span> (<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="fl">3.785411784</span>) <span class="op">/</span><span class="st"> </span>(<span class="fl">1.609344</span> <span class="op">*</span><span class="st"> </span>mpg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span><span class="kw">select</span>(weight, lp100km) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">  </span><span class="co"># and pass the built plot on</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">  </span><span class="kw">l_plot</span>(<span class="dt">title =</span> <span class="st">"Gas Usage"</span>, </a>
<a class="sourceLine" id="cb10-7" title="7">         <span class="dt">showGuides =</span> <span class="ot">TRUE</span>, <span class="dt">showScales =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb10-8" title="8">         <span class="dt">ylabel =</span> <span class="st">"Litres per 100 kilometres"</span>, </a>
<a class="sourceLine" id="cb10-9" title="9">         <span class="dt">linkingGroup =</span> <span class="st">"Motor Trend 1974"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>()   <span class="co"># get a static version via grid</span></a></code></pre></div>
<p><img src="pipes_files/figure-html/loon_only_pipe-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Zehao Xu, R. Wayne Oldford.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
