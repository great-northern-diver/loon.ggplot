<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Pipes • loon.ggplot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pipes">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">loon.ggplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.3.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/grammarOfInteractiveGraphics.html">A Grammar of Interactive Graphics</a></li>
    <li><a class="dropdown-item" href="../articles/linking.html">Linking</a></li>
    <li><a class="dropdown-item" href="../articles/pipes.html">Pipes</a></li>
    <li><a class="dropdown-item" href="../articles/ggplot2loon.html">ggplots to loon plots</a></li>
    <li><a class="dropdown-item" href="../articles/loon2ggplot.html">loon plots to ggplots</a></li>
    <li><a class="dropdown-item" href="../articles/thereAndBackAgain.html">There and back again</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/great-northern-diver/loon.ggplot" aria-label="GitHub repository for loon.ggplot"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Pipes</h1>
                        <h4 data-toc-skip class="author">Wayne Oldford
and Zehao Xu</h4>
            
            <h4 data-toc-skip class="date">2025-06-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/great-northern-diver/loon.ggplot/blob/HEAD/vignettes/pipes.Rmd" class="external-link"><code>vignettes/pipes.Rmd</code></a></small>
      <div class="d-none name"><code>pipes.Rmd</code></div>
    </div>

    
    
<p>The <code>magrittr</code> package provides several different types of
pipes which can be a handy way to organize computation, especially when
the computation involves processing data for input to another procedure,
in this case <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>  <span class="co"># load this to also have dplyr functionality</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">p1_piped</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>transmission <span class="op">=</span> <span class="va">am</span>, weight <span class="op">=</span> <span class="va">wt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp100km <span class="op">=</span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fl">3.785411784</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1.609344</span> <span class="op">*</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">lp100km</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">lp100km</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Litres per 100 kilometres"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Gas usage"</span><span class="op">)</span></span></code></pre></div>
<p>Here the “pipe” <code>%&gt;%</code> takes the output of its left hand
side and pushes it into the first argument of its right hand side.
Arbitrary many pipes may be gathered together.<br>
This connects nicely with <code>ggplot2</code>’s addition <code>+</code>
operator (<code>+</code> itself is sometimes a pipe, sometimes a layer
in <code>ggplot</code> construction) to create the <code>ggplot</code>
from the data and assign it to <code>p1_piped</code>.</p>
<p>Two things to note here are. First, the result of the data
manipulation is assigned at the beginning using the <code>&lt;-</code>
assignment function which seems to run counter to the data flow
indicated by the pipes. A more consistent flow would be to have instead
written</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>transmission <span class="op">=</span> <span class="va">am</span>, weight <span class="op">=</span> <span class="va">wt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp100km <span class="op">=</span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fl">3.785411784</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1.609344</span> <span class="op">*</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">lp100km</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">lp100km</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Litres per 100 kilometres"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Gas usage"</span><span class="op">)</span>  <span class="op">-&gt;</span>   <span class="co"># Note assignment occurs here</span></span>
<span>  <span class="va">p1_piped</span></span></code></pre></div>
<p>Now the assignment operator <code>-&gt;</code> is used at the end,
matching the data flow of the pipes.</p>
<p>Second, in either case the <code>ggplot</code> is
<strong>not</strong> itself displayed (or rendered) until it is
printed.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p1_piped</span></span></code></pre></div>
<p><img src="pipes_files/figure-html/p1_piped-1.png" width="50%" style="display: block; margin: auto;"></p>
<p>Once built, as happens when the plot has been displayed as above, an
interactive loon plot can be had as always, simply by calling
<code><a href="../reference/ggplot2loon.html">ggplot2loon()</a></code> on the built <code>ggplot</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://great-northern-diver.github.io/loon.ggplot/">loon.ggplot</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span><span class="op">(</span><span class="va">p1_piped</span>, linkingGroup <span class="op">=</span> <span class="st">"Motor Trend 1974"</span><span class="op">)</span></span></code></pre></div>
<p>Again, the additional specification here of the
<code>linkingGroup</code> will cause display attributes to be pulled
from the plots in that linking group.</p>
<div class="section level3">
<h3 id="using-gg_pipedata-ggplotobj">Using <code>gg_pipe(data, ggplotObj)</code><a class="anchor" aria-label="anchor" href="#using-gg_pipedata-ggplotobj"></a>
</h3>
<p>Note that before a <code>ggplot</code> can be displayed, a number of
steps are performed so as to prepare the plot object for rendering
(e.g. see <code><a href="https://ggplot2.tidyverse.org/reference/ggplot_build.html" class="external-link">ggplot2::ggplot_build</a></code>). Unfortunately, this delay
in completing the preparation of the <code>ggplot</code> can make it
difficult to attach further operations in the <code>%&gt;%</code>
pipeline after the <code>ggplot</code> itself – apart of course from
further <code>ggplot2</code> additions via the <code>+</code> operator.
For example, one cannot simply add <code>%&gt;% ggplot2loon()</code> at
the end of the pipeline used to construct the <code>ggplot</code>. That
is,</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>transmission <span class="op">=</span> <span class="va">am</span>, weight <span class="op">=</span> <span class="va">wt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp100km <span class="op">=</span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fl">3.785411784</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1.609344</span> <span class="op">*</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">lp100km</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">lp100km</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Litres per 100 kilometres"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Gas usage"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>would produce neither a <code>ggplot</code> or an interactive
<code>loon</code> plot.</p>
<p>To get around this problem, in <code>loon.ggplot</code> the function
<code><a href="../reference/gg_pipe.html">gg_pipe()</a></code> is provided to encapsulate the
<code>ggplot</code> construction in any pipeline and force the
<code>ggplot</code> to be built (though not rendered in a display). The
output of this function can then be passed on to
<code><a href="../reference/ggplot2loon.html">ggplot2loon()</a></code>.</p>
<p>For example,</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>transmission <span class="op">=</span> <span class="va">am</span>, weight <span class="op">=</span> <span class="va">wt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp100km <span class="op">=</span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fl">3.785411784</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1.609344</span> <span class="op">*</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">lp100km</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># encapsulate the ggplot construction with gg_pipe()</span></span>
<span>  <span class="fu"><a href="../reference/gg_pipe.html">gg_pipe</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">lp100km</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Litres per 100 kilometres"</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Gas usage"</span><span class="op">)</span></span>
<span>          <span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># and pass the built plot on</span></span>
<span>  <span class="fu"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span><span class="op">(</span>linkingGroup <span class="op">=</span> <span class="st">"Motor Trend 1974"</span><span class="op">)</span></span></code></pre></div>
<p>constructs the interactive plot which could have been assigned to a
variable as was done with the original <code>ggplot</code>
construction.</p>
<p>From here, the pipeline can be grown as before, recognizing of course
that the output of <code><a href="../reference/ggplot2loon.html">ggplot2loon()</a></code> is a <code>loon</code>
plot of some sort. This means that functions that operate on
<code>loon</code> plots (as their first argument can be used). As with
any piping operation, attention must be given to the first argument of
the functions in the pipeline as well as to what the input and outputs
are of any function.</p>
<p>For example,</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>transmission <span class="op">=</span> <span class="va">am</span>, weight <span class="op">=</span> <span class="va">wt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp100km <span class="op">=</span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fl">3.785411784</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1.609344</span> <span class="op">*</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">lp100km</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># encapsulate the ggplot construction with gg_pipe()</span></span>
<span>  <span class="fu"><a href="../reference/gg_pipe.html">gg_pipe</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">lp100km</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Litres per 100 kilometres"</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Gas usage"</span><span class="op">)</span> <span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># and pass the built plot on</span></span>
<span>  <span class="fu"><a href="../reference/ggplot2loon.html">ggplot2loon</a></span><span class="op">(</span>linkingGroup <span class="op">=</span> <span class="st">"Motor Trend 1974"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="co"># pipe the loon plot on</span></span>
<span>  <span class="fu"><a href="https://great-northern-diver.github.io/loon/reference/l_cget.html" class="external-link">l_cget</a></span><span class="op">(</span><span class="st">'color'</span><span class="op">)</span>  <span class="co"># Gets and returns the vector of point colours</span></span></code></pre></div>
<p>In the <code>magrittr</code> package (the source of the pipeline
operation) there are a variety of pipeline operators which might also be
useful – not just <code>%&gt;%</code>.</p>
</div>
<div class="section level3">
<h3 id="using-l_ggplot">Using <code>l_ggplot()</code><a class="anchor" aria-label="anchor" href="#using-l_ggplot"></a>
</h3>
<p>Additionally, using function <code>l_ggplot</code>, can also create a
<code>loon</code> plot with <code>ggplot</code> pipe model.</p>
<p>The display of <code>ggplot</code> object relies on the default
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> function in <code>R</code>. Function
<code>l_ggplot</code>, inserts a new class <code>l_ggplot</code> into
the original <code>ggplot</code> object. At the printing time, <a href="http://adv-r.had.co.nz/S3.html" class="external-link">S3 method</a>
<code><a href="../reference/print.l_ggplot.html">print.l_ggplot()</a></code> will be executed to transform a
<code>ggplot</code> plot to a <code>loon</code> plot.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>transmission <span class="op">=</span> <span class="va">am</span>, weight <span class="op">=</span> <span class="va">wt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp100km <span class="op">=</span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fl">3.785411784</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1.609344</span> <span class="op">*</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">lp100km</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># replace `ggplot` to `lggplot`</span></span>
<span>  <span class="fu"><a href="../reference/l_ggplot.html">l_ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">lp100km</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Litres per 100 kilometres"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Gas usage"</span><span class="op">)</span></span>
<span><span class="va">obj</span></span></code></pre></div>
<p>However, this design has an obvious drawback: confusion of the output
data structure. Since the transformation is accomplished at the printing
time, object <code>obj</code> is still a <code>ggplot</code> data
structure. To create a <code>loon</code> “handle”, we have to use
<code><a href="https://great-northern-diver.github.io/loon/reference/l_getFromPath.html" class="external-link">l_getFromPath()</a></code></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"loon"</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="st">"1.2.4"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># **THIS IS IMPORTANT**</span></span>
<span>  <span class="co"># The path name can be obtained at the top left tk window</span></span>
<span>  <span class="co"># Suppose the label is "loon.ggplot --path: .l13.ggplot"</span></span>
<span>  <span class="co"># The path would be the char right after "path: " which is ".l13.ggplot"</span></span>
<span>  <span class="va">loonWidget</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://great-northern-diver.github.io/loon/reference/l_getFromPath.html" class="external-link">l_getFromPath</a></span><span class="op">(</span><span class="st">".l13.ggplot"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">loonWidget</span><span class="op">)</span></span>
<span>  <span class="co"># [1] "l_plot" "loon"</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="just-use-loon-for-built-in-interactive-plots">Just use loon for built-in interactive plots<a class="anchor" aria-label="anchor" href="#just-use-loon-for-built-in-interactive-plots"></a>
</h3>
<p>Of course, for plots already existing in <code>loon</code>,
<code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code> and hence <code><a href="../reference/gg_pipe.html">gg_pipe()</a></code> could be avoided
entirely:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>transmission <span class="op">=</span> <span class="va">am</span>, weight <span class="op">=</span> <span class="va">wt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp100km <span class="op">=</span> <span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fl">3.785411784</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1.609344</span> <span class="op">*</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">lp100km</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># and pass the built plot on</span></span>
<span>  <span class="fu"><a href="https://great-northern-diver.github.io/loon/reference/l_plot.html" class="external-link">l_plot</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Gas Usage"</span>, </span>
<span>         showGuides <span class="op">=</span> <span class="cn">TRUE</span>, showScales <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>         ylabel <span class="op">=</span> <span class="st">"Litres per 100 kilometres"</span>, </span>
<span>         linkingGroup <span class="op">=</span> <span class="st">"Motor Trend 1974"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span>   <span class="co"># get a static version via grid</span></span></code></pre></div>
<p><img src="images/pipes/gas_usage.png" width="70%" style="display: block; margin: auto;"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zehao Xu, R. Wayne Oldford.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
