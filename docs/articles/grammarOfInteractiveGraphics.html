<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Grammar Of Interactive Graphics • loon.ggplot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="A Grammar Of Interactive Graphics">
<meta property="og:description" content="loon.ggplot">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">loon.ggplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/grammarOfInteractiveGraphics.html">A Grammar of Interactive Graphics</a>
    </li>
    <li>
      <a href="../articles/linking.html">Linking</a>
    </li>
    <li>
      <a href="../articles/Pipes.html">Pipes</a>
    </li>
    <li>
      <a href="../articles/ggplot2loon.html">ggplots to loon plots</a>
    </li>
    <li>
      <a href="../articles/loon2ggplot.html">loon plots to ggplots</a>
    </li>
    <li>
      <a href="../articles/thereAndBackAgain.html">There and back again</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/great-northern-diver/loon,ggplot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="grammarOfInteractiveGraphics_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>A Grammar Of Interactive Graphics</h1>
            <h3 class="subtitle"><code>loon.ggplot</code></h3>
                        <h4 class="author">R. W. Oldford and Zehao Xu</h4>
            
            <h4 class="date">2021-09-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/great-northern-diver/loon.ggplot/blob/master/vignettes/grammarOfInteractiveGraphics.Rmd"><code>vignettes/grammarOfInteractiveGraphics.Rmd</code></a></small>
      <div class="hidden name"><code>grammarOfInteractiveGraphics.Rmd</code></div>

    </div>

    
    
<p>Just as <code>ggplot2</code> provides a layered implementation of a <strong>grammar of graphics</strong>, <code>loon.ggplot</code> provides a layered implementation of a <strong>grammar of interactive graphics</strong>.</p>
<p>With <code>loon.ggplot</code>, data analysts can easily switch between the elegant and beautiful static graphics of <code>ggplot2</code> and the powerful direct manipulation interactive graphics of <code>loon</code>, <strong>using each where it is most natural</strong>.</p>
<hr>
<div id="a-working-dataset-airquality" class="section level1">
<h1 class="hasAnchor">
<a href="#a-working-dataset-airquality" class="anchor"></a>A working dataset – <code>airquality</code>
</h1>
<p>To provide a working example, consider the <code>airquality</code> dataset:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"airquality"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="co">#&gt;      Ozone           Solar.R           Wind             Temp      </span>
<span class="co">#&gt;  Min.   :  1.00   Min.   :  7.0   Min.   : 1.700   Min.   :56.00  </span>
<span class="co">#&gt;  1st Qu.: 18.00   1st Qu.:115.8   1st Qu.: 7.400   1st Qu.:72.00  </span>
<span class="co">#&gt;  Median : 31.50   Median :205.0   Median : 9.700   Median :79.00  </span>
<span class="co">#&gt;  Mean   : 42.13   Mean   :185.9   Mean   : 9.958   Mean   :77.88  </span>
<span class="co">#&gt;  3rd Qu.: 63.25   3rd Qu.:258.8   3rd Qu.:11.500   3rd Qu.:85.00  </span>
<span class="co">#&gt;  Max.   :168.00   Max.   :334.0   Max.   :20.700   Max.   :97.00  </span>
<span class="co">#&gt;  NA's   :37       NA's   :7                                       </span>
<span class="co">#&gt;      Month            Day      </span>
<span class="co">#&gt;  Min.   :5.000   Min.   : 1.0  </span>
<span class="co">#&gt;  1st Qu.:6.000   1st Qu.: 8.0  </span>
<span class="co">#&gt;  Median :7.000   Median :16.0  </span>
<span class="co">#&gt;  Mean   :6.993   Mean   :15.8  </span>
<span class="co">#&gt;  3rd Qu.:8.000   3rd Qu.:23.0  </span>
<span class="co">#&gt;  Max.   :9.000   Max.   :31.0  </span>
<span class="co">#&gt; </span></code></pre></div>
<p>It has missing data (in <code>Ozone</code> and <code>Solar.R</code>) and the variable <code>Month</code> appears as numerical. The date information can easily be made more meaningful:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">airquality</span><span class="op">$</span><span class="va">Date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">airquality</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"1973"</span>, <span class="va">Month</span>, <span class="va">Day</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Could also look up the day of the week for each date and add it</span>
<span class="va">airquality</span><span class="op">$</span><span class="va">Weekday</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">weekdays</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">$</span><span class="va">Date</span><span class="op">)</span>,
                             levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>,
                                        <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>,
                                        <span class="st">"Saturday"</span>, <span class="st">"Sunday"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><code>Month</code> can also be turned it into a factor so that its levels are three character month abbreviations (arranged to match calendar order):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">airquality</span><span class="op">$</span><span class="va">Month</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">month.abb</span><span class="op">[</span><span class="va">airquality</span><span class="op">$</span><span class="va">Month</span><span class="op">]</span>, 
                           levels <span class="op">=</span> <span class="va">month.abb</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">$</span><span class="va">Month</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p>The data now look like</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">airquality</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day       Date   Weekday</span>
<span class="co">#&gt; 1    41     190  7.4   67   May   1 1973-05-01   Tuesday</span>
<span class="co">#&gt; 2    36     118  8.0   72   May   2 1973-05-02 Wednesday</span>
<span class="co">#&gt; 3    12     149 12.6   74   May   3 1973-05-03  Thursday</span></code></pre></div>
<p>With its mix of continuous and categorical variables (some with missing data) this transformed data will be used to illustrate <code>loon.ggplot</code>’s grammar of interactive graphics.</p>
<hr>
</div>
<div id="the-trick-ggplot-becomes-l_ggplot" class="section level1">
<h1 class="hasAnchor">
<a href="#the-trick-ggplot-becomes-l_ggplot" class="anchor"></a>The trick: <code>ggplot()</code> becomes <code>l_ggplot()</code>
</h1>
<p>The interactive grammar begins by simply replacing <code>ggplot()</code> by <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code>, wherever it appears in the layered grammar. The same arguments (e.g., <code>data</code>, <code>mapping</code>, etc.) and clauses (e.g. geoms, scales, coordinates, etc.) are used, but now to create an interactive plot.</p>
<p>For example,</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lgp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/l_ggplot.html">l_ggplot</a></span><span class="op">(</span><span class="va">airquality</span>, 
                mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Wind</span>, y <span class="op">=</span> <span class="va">Ozone</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Air quality in New York (1973)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> </code></pre></div>
<p>Like <code>ggplot()</code>, <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code> produces a data structure containing the information needed to create a plot. No plot is actually yet displayed; rather <code>lgp</code> has the <em>potential</em> to produce a plot on demand.</p>
<p>A look at its class</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">lgp</span><span class="op">)</span>
<span class="co">#&gt; [1] "l_ggplot" "gg"       "ggplot"</span></code></pre></div>
<p>suggests that it is both an <code>l_ggplot</code> and a <code>ggplot</code> (and <code>gg</code>).</p>
<p>In <code>ggplot2</code> identical methods have been written for <strong>both</strong> the <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> <strong>and</strong> the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function to show the <code>ggplot</code> on the current device.<br>
In <code>loon.ggplot</code> these functions are different for an <code>l_ggplot</code>:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/graphics/plot.default.html">plot(lgp)</a></code> displays the <code>lgp</code> structure as a static <code>ggplot</code> on the current device</li>
<li>
<code><a href="https://rdrr.io/r/base/print.html">print(lgp)</a></code> displays it as an interactive <code>loon</code> plot in the <code>R</code> session.</li>
</ul>
<p>For example, to see the <code>ggplot</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">lgp</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-7-1.png" width="40%" style="display: block; margin: auto;"></p>
<p>And to see the interactive <code>loon</code> plot, simply print it:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lgp</span>                   <span class="co"># or print(lgp)</span></code></pre></div>
<p>which will look something like <img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-10-1.png" width="40%" style="display: block; margin: auto;"> (as rendered in <code>grid</code> graphics).</p>
<p>Each plot (the static <code>ggplot</code> and the interactive <code>loon</code> plot) presents the same information, but in slightly different form (e.g., different choices on title placement, white space padding, etc.)</p>
<p>Though the data information is identical in both plots, the <code>loon</code> plot appears a little more spartan. This is because an interactive plot is dynamic and can change in real time by direct interaction; it is enough that the analyst appreciates the data content of the plot without too much concern over display details. In contrast, the <code>ggplot</code> is more often meant to be shared in print and so demands more flexibility to lay out its plot elements in an elegant display.</p>
<p><strong>Note</strong>: In <code>ggplot2</code>, every time a <code>ggplot</code> is printed, a new plot is produced on the current device. Similarly, in <code>loon.ggplot</code>, every time an <code>l_ggplot</code> is printed, a <strong>new</strong> (interactive) <code>loon</code> plot is produced; every time it is plotted, a new (static) <code>ggplot</code> is produced.</p>
<div id="programmatic-access-of-the-interactive-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#programmatic-access-of-the-interactive-plot" class="anchor"></a>Programmatic access of the interactive plot</h2>
<p>At times, as when creating this document, it will be handy to have programmatic access to the <code>loon</code> plot. This can be done by assigning the <code>loon</code> plot to a variable, say <code>lp</code>, in any one of several different ways:</p>
<p>When it was first printed it, the interactive plot would have returned a string. For example, it was</p>
<pre><code>#&gt; [1] ".l0.ggplot.plot"</code></pre>
<p>which is of the form <code>".lXX.ggplot.plot"</code> where <code>XX</code> is a non-negative integer.</p>
<p>This is the <code>tcltk</code> “path” to the <code>loon</code> plot and uniquely identifies the <code>loon</code> structure. The data structure is now accessed through <code>l_getFromPath(pathname)</code> as below.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lp</span> <span class="op">&lt;-</span> <span class="fu">l_getFromPath</span><span class="op">(</span><span class="st">".lXX.ggplot.plot"</span><span class="op">)</span>  <span class="co"># replace XX by whatever number appeared</span></code></pre></div>
<p>Of course, this requires you to have noticed and recovered the string pathname for that plot when it first appeared. Fortunately, that is not necessary. In the title bar of the window containing the <code>loon</code> plot, the string following <code>"path: "</code> can also be used. In the present case, this will be of the form <code>".lXX.ggplot"</code> (as before but without the additional <code>".plot"</code> suffix). The call</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lp</span> <span class="op">&lt;-</span> <span class="fu">l_getFromPath</span><span class="op">(</span><span class="st">".lXX.ggplot"</span><span class="op">)</span>  <span class="co"># replace XX by whatever number appeared</span></code></pre></div>
<p>will return the interactive plot as before.</p>
<p>Finally, if you have the foresight to know that you would like to have programmatic access to the interactive plot from the start, you could assign it to a variable when it was first created.<br>
There are two ways to do this.</p>
<p>One is</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">lgp</span><span class="op">)</span></code></pre></div>
<p>The other uses a powerful function called <code><a href="../reference/loon.ggplot.html">loon.ggplot()</a></code> (more on this below):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loon.ggplot.html">loon.ggplot</a></span><span class="op">(</span><span class="va">lgp</span><span class="op">)</span></code></pre></div>
<p><strong>Note</strong>: that unlike <code>l_getFromPath()</code>, either of the above calls will produce a <strong>new</strong> interactive plot from <code>lgp</code> and assign it to <code>lp</code>.</p>
</div>
<div id="the-loon-ggplot-duality" class="section level2">
<h2 class="hasAnchor">
<a href="#the-loon-ggplot-duality" class="anchor"></a>The loon-ggplot duality</h2>
<p>Using <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code> in place of <code>ggplot()</code> extends the graphics grammar of <code>ggplot2</code> to produce interactive <code>loon</code> plots.</p>
<ul>
<li>
<p>use <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code> in place of <code>ggplot()</code></p>
<ul>
<li><p><em>plotting</em> an <code>l_ggplot</code> produces a static <code>ggplot</code> display</p></li>
<li><p><em>printing</em> an <code>l_ggplot</code> produces an interactive <code>loon</code> display.</p></li>
</ul>
</li>
<li><p>the <code>l_ggplot</code> is <em>not</em> the interactive <code>loon</code> plot; it is an <em>enhanced</em> <code>ggplot</code> and <em>can be augmented just as any other <code>ggplot</code></em>.</p></li>
<li>
<p>Changes to the <code>ggplot</code> have <em>no effect</em> on the interactive plot</p>
<p>For example,</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">lgp</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-16-1.png" width="40%" style="display: block; margin: auto;"> behaves like any other <code>ggplot</code> with no effect on the interactive plot.</p>
</li>
<li>
<p>Changes to the interactive <code>loon</code> plot have <em>no effect</em> on the static <code>l_ggplot</code></p>
<p>Make whatever changes you like interactively to the <code>loon</code> plot <code>lp</code>, or programmatically as below:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Change glyph aesthetics of ALL points</span>
<span class="va">lp</span><span class="op">[</span><span class="st">"color"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"lightgrey"</span>
<span class="va">lp</span><span class="op">[</span><span class="st">"glyph"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"ctriangle"</span>  <span class="co"># closed triangle</span>
<span class="va">lp</span><span class="op">[</span><span class="st">"size"</span><span class="op">]</span>  <span class="op">&lt;-</span> <span class="fl">10</span>           <span class="co"># proportional to area in loon</span>

<span class="co"># Dynamically change the scaling (magnify or zoom in and out)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">mag</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1</span>, <span class="fl">1.2</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
   <span class="va">lp</span><span class="op">[</span><span class="st">"zoomX"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">mag</span>
   <span class="va">lp</span><span class="op">[</span><span class="st">"zoomY"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">mag</span>
   <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span> <span class="co"># slow down to see effect</span>
 <span class="op">}</span>
<span class="co"># Settle on</span>
<span class="va">lp</span><span class="op">[</span><span class="st">"zoomX"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1.2</span>
<span class="va">lp</span><span class="op">[</span><span class="st">"zoomY"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1.2</span>
<span class="co">#</span>
<span class="co"># Or, similarly, change the location/origin of the plot</span>
<span class="va">xlocs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">lp</span><span class="op">[</span><span class="st">"x"</span><span class="op">]</span><span class="op">)</span>,
             <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lp</span><span class="op">[</span><span class="st">"x"</span><span class="op">]</span><span class="op">)</span>,
             length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>

<span class="va">ylocs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">lp</span><span class="op">[</span><span class="st">"y"</span><span class="op">]</span><span class="op">)</span>,
             <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lp</span><span class="op">[</span><span class="st">"y"</span><span class="op">]</span><span class="op">)</span>,
             length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co"># Dynamically change the origin</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">xlocs</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">lp</span><span class="op">[</span><span class="st">"panX"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">xlocs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">lp</span><span class="op">[</span><span class="st">"panY"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">ylocs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span> <span class="co"># slow down to see effect</span>
<span class="op">}</span>
<span class="co"># and back</span>
<span class="va">xlocs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="va">xlocs</span><span class="op">)</span>
<span class="va">ylocs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="va">ylocs</span><span class="op">)</span>
<span class="co"># dynamically</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">xlocs</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">lp</span><span class="op">[</span><span class="st">"panX"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">xlocs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">lp</span><span class="op">[</span><span class="st">"panY"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">ylocs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span> <span class="co"># slow down to see effect</span>
<span class="op">}</span>
<span class="co"># Perhaps settle on</span>
<span class="va">lp</span><span class="op">[</span><span class="st">"panX"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">7</span>
<span class="va">lp</span><span class="op">[</span><span class="st">"panY"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></code></pre></div>
<p>And now observe the effect on each of the plots:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First the l_ggplot </span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">lgp</span><span class="op">)</span>  </code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-18-1.png" width="40%" style="display: block; margin: auto;"></p>
<p>No change. It is unaffected by any change to the interactive plot.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Now the l_plot </span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">lp</span><span class="op">)</span>   </code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-19-1.png" width="40%" style="display: block; margin: auto;"></p>
<p>Reflects the changes made on the interactive plot.</p>
</li>
</ul>
</div>
<div id="the-function-loon-ggplot" class="section level2">
<h2 class="hasAnchor">
<a href="#the-function-loon-ggplot" class="anchor"></a>The function <code>loon.ggplot()</code>
</h2>
<p>Earlier, <code><a href="../reference/loon.ggplot.html">loon.ggplot()</a></code> was recommended as a means to produce an interactive plot from an <code>l_ggplot</code> and to assign it to a variable, as in</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loon.ggplot.html">loon.ggplot</a></span><span class="op">(</span><span class="va">lgp</span><span class="op">)</span></code></pre></div>
<p>This makes it seem essentially equivalent to <code><a href="https://rdrr.io/r/base/print.html">print(lgp)</a></code>, but it is not.</p>
<p>Instead, <code><a href="../reference/loon.ggplot.html">loon.ggplot()</a></code> is a powerful <strong>two way bridge</strong> between <code>ggplot</code>s and <code>loon</code> plots.</p>
<p>When called on</p>
<ul>
<li><p>an <code>l_ggplot</code> (an extended <code>ggplot</code>) <code><a href="../reference/loon.ggplot.html">loon.ggplot(lgp)</a></code> produces an interactive <code>loon</code> plot.</p></li>
<li>
<p>an interactive <code>loon</code> plot, it produces a static <code>ggplot</code></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/loon.ggplot.html">loon.ggplot</a></span><span class="op">(</span><span class="va">lp</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-21-1.png" width="40%" style="display: block; margin: auto;"></p>
<p>This is a <code>ggplot</code> with parameters to make it look like the <code>loon</code> plot it was built from (e.g. the title is centred in this <code>ggplot</code>).</p>
<p><code><a href="../reference/loon.ggplot.html">loon.ggplot()</a></code> gives us <strong>a second way to produce a static version</strong> of an interactive <code>loon</code> plot.</p>
<ul>
<li><p><code><a href="https://rdrr.io/r/graphics/plot.default.html">plot(lp)</a></code> produces a <code>grid</code> graphic object (or <code>grob</code>)</p></li>
<li><p><code><a href="../reference/loon.ggplot.html">loon.ggplot(lp)</a></code> produces a <code>ggplot</code> graphic object.</p></li>
</ul>
<p>Either reproduces the current <code>loon</code> plot as a static snapshot of its present appearence (ideally <em>wysiwyg</em>).</p>
<p>Which is preferred depends on the use intended for the static plot .</p>
<p>The <code>ggplot</code> version is easier to work with and trivial to adapt using the grammar.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loon.ggplot.html">loon.ggplot</a></span><span class="op">(</span><span class="va">lp</span><span class="op">)</span>  <span class="co"># loon to ggplot</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">gp</span><span class="op">)</span>
<span class="co">#&gt; [1] "gg"     "ggplot"</span>
<span class="va">gp</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-22-1.png" width="40%" style="display: block; margin: auto;"></p>
<p>Alternatively, a new <strong>interactive plot can be generated from an ordinary <code>ggplot</code></strong> as</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_lp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loon.ggplot.html">loon.ggplot</a></span><span class="op">(</span><span class="va">gp</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>and this <strong>interactive plot is turned into a new static <code>ggplot</code> with the same function</strong>, as shown below</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/loon.ggplot.html">loon.ggplot</a></span><span class="op">(</span><span class="va">new_lp</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/unnamed-chunk-24-1.png" width="40%" style="display: block; margin: auto;"></p>
<p>Note that the grey polygon emphasizing the confidence region does not appear. It is there, but as a hidden <code>layer</code> of the <code>loon</code> plot that can be revealed at any time (via the <code>loon</code> inspector or programmatically). The polygon is not shown by default because colours do not (yet) have an alpha channel (for transparency) in <code>tcltk</code>.</p>
</li>
</ul>
<p><strong>The bridge:</strong> <code><a href="../reference/loon.ggplot.html">loon.ggplot()</a></code> turns <code>ggplot</code>s to interactive <code>loon</code> plots and <code>loon</code> plots to <code>ggplot</code>s.</p>
<hr>
</div>
</div>
<div id="the-interactive-grammar" class="section level1">
<h1 class="hasAnchor">
<a href="#the-interactive-grammar" class="anchor"></a>The interactive grammar</h1>
<p><code>loon.ggplot</code> extends the grammar of graphics by adding several new clauses.</p>
<div id="linking" class="section level2">
<h2 class="hasAnchor">
<a href="#linking" class="anchor"></a><code>+ linking()</code>
</h2>
<p><code>+  linking(linkingGroup = NULL, linkingKey = NULL, linkedStates = NULL, sync = NULL)</code></p>
<p><code>loon</code> implements a <em>group-key-state</em> linking model.</p>
<p>Interactive plots having the same <code>linkingGroup</code> are <strong>linked</strong>, in that each plot changes its display in response to display changes of the <code>linkedStates</code> of any plot in the same <code>linkingGroup</code>. Only those <code>linkedStates</code> in common are changed and display elements are matched by values of the <code>linkingKey</code>.</p>
<ul>
<li>
<p><code>linkingGroup</code></p>
<p>A string naming the group or <code>NULL</code> for no linking.</p>
</li>
<li>
<p><code>linkedStates</code></p>
<p>A character vector of the states to be linked.</p>
<p>By default these include <code>selected</code>, <code>active</code>, and others peculiar to each type of plot such as <code>color</code> and <code>size</code>.</p>
</li>
<li>
<p><code>linkingKey</code></p>
<p>A length <code>n</code> character vector of unique strings, one for each observation; default is <code>"0"</code>, <code>"1"</code>, …, <code>"n-1"</code>.</p>
</li>
<li>
<p><code>sync</code></p>
<p>Specifies the <em>direction</em> of synchronizing the linked states at the time the plot is created.<br>
The value <code>"pull"</code> pulls the values of the linked states from plots in the linking group and assigns them to the new plot; value <code>"push"</code> pushes the newly created plot’s linked states values out to the others in the linking group.</p>
<p>Default is <code>"pull"</code> unless some aesthetics matching the linked states are specified in the plot creation; then the default will be <code>"push"</code>.</p>
</li>
</ul>
<p>Each plot will propogate, and respond to, only changes in those <code>state</code>s named in its <code>linkedStates</code>. Display elements associated with the unique set of keys in each plot’s <code>linkingKey</code> will change together.</p>
</div>
<div id="hover" class="section level2">
<h2 class="hasAnchor">
<a href="#hover" class="anchor"></a><code>+ hover()</code>
</h2>
<p><code>+ hover(itemLabel = NULL, showItemLabels = NULL)</code></p>
<p>Provides a pop up display as the mouse hovers over a plot element in the interactive plot.</p>
<ul>
<li>
<p><code>itemLabel</code></p>
<p>A character vector of length <code>n</code> with a string to be used to pop up when the mouse hovers above that element.</p>
</li>
<li>
<p><code>showItemLabels</code></p>
<p>A single logical value: <code>TRUE</code> if pop up labels are to appear on hover, <code>FALSE</code> (the default) if they are not.</p>
</li>
</ul>
</div>
<div id="selection" class="section level2">
<h2 class="hasAnchor">
<a href="#selection" class="anchor"></a><code>+ selection()</code>
</h2>
<p><code>+ selection(selected = NULL, selectBy = NULL, selectionLogic = NULL)</code></p>
<p>Set which elements (i.e., observations) are <code>"selected"</code>. These are shown highlighted in the plot.</p>
<ul>
<li>
<p><code>selected</code></p>
<p>a logical or a logical vector of length n that determines which observations are selected (TRUE and hence appear highlighted in the plot) and which are not. Default is FALSE and no points are highlit.</p>
</li>
<li>
<p><code>selectBy</code></p>
<p>A string determining how selection will occur in the interactive plot. Default is <code>"sweeping"</code> where a rectangular region is reshaped or “swept” out to select observations.; alternately <code>"brushing"</code> will indicate that a fixed rectangular region is moved about the display to select observations.</p>
</li>
<li>
<p><code>selectionLogic</code></p>
<p>One of <code>"select"</code> (the default), <code>"deselect"</code>, and <code>"invert"</code>. The first highlights observations as selected, the second downlights them, and the third inverts them (downlighting highlit observations and highlighting downlighted ones).</p>
</li>
</ul>
</div>
<div id="active" class="section level2">
<h2 class="hasAnchor">
<a href="#active" class="anchor"></a><code>+ active()</code>
</h2>
<p><code>+ active(active = NULL, activeGeomLayers = NULL)</code></p>
<p>Set <code>active</code> and/or <code>activeGeomLayers</code></p>
<ul>
<li>
<p><code>active</code></p>
<p>a logical, or a logical vector of length <code>n</code>, determining which observations are active (hence appear in the plot) and which are inactive (<code>FALSE</code> and hence do not appear). Default is <code>TRUE</code>.</p>
</li>
<li>
<p><code>activeGeomLayers</code></p>
<p>determine which geom layer is interactive by its <code>geom_...</code> position in the grammar of the expression. Currently, only <code>geom_point()</code> and <code>geom_histogram()</code> can be set as the active geom layer(s) so far. (N.B. more than one <code>geom_point()</code> layer can be set as an active layer, but only one <code>geom_histogram()</code> can be set as an active geom layer and it can be the only active layer)</p>
</li>
</ul>
</div>
<div id="zoom" class="section level2">
<h2 class="hasAnchor">
<a href="#zoom" class="anchor"></a><code>+ zoom()</code>
</h2>
<p><code>+ zoom(layerId = NULL, scaleToFun = NULL)</code></p>
<p>Change the visible plot region by scaling to different elements of the display.</p>
<ul>
<li>
<p><code>layerId</code></p>
<p>numerical; which layer to scale the plot by. If the layerId is set as <code>NULL</code> (default), the region of the interactive graphics loon will be determined by the ggplot object (i.e. <code>coord_cartesian</code>, <code>xlim</code>, etc); else one can use <code>scaleToFun</code> to modify the region of the layer.</p>
</li>
<li>
<p><code>scaleToFun</code></p>
<p>scale function to be used. If <code>NULL</code> (default), based on different layers, different scale functions will be applied. For example, if the layer is the main graphic model, i.e. <code>l_plot</code> <code>l_hist</code>, then the default <code>scaleToFun</code> is <code>l_scaleto_plot</code>; else if the layer is a general <code>l_layer</code> widget, the default <code>scaleToFun</code> would be <code><a href="https://great-northern-diver.github.io/loon/reference/l_scaleto_layer.html">loon::l_scaleto_layer</a></code>.</p>
<p>If it is not <code>NULL</code>, any of the following <code>scaleToFun</code> functions could be used</p>
<table class="table">
<thead><tr class="header">
<th align="left">scale to</th>
<th align="left">Subfunction</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">plot</td>
<td align="left">l_scaleto_plot</td>
</tr>
<tr class="even">
<td align="left">world</td>
<td align="left">l_scaleto_world</td>
</tr>
<tr class="odd">
<td align="left">active</td>
<td align="left">l_scaleto_active</td>
</tr>
<tr class="even">
<td align="left">selected</td>
<td align="left">l_scaleto_selected</td>
</tr>
<tr class="odd">
<td align="left">layer</td>
<td align="left">l_scaleto_layer</td>
</tr>
</tbody>
</table>
<p>Alternatively, <code>scaleToFun</code> can be any function whose arguments match those of the functions above.</p>
</li>
</ul>
</div>
<div id="interactivity" class="section level2">
<h2 class="hasAnchor">
<a href="#interactivity" class="anchor"></a><code>+ interactivity()</code>
</h2>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">+</span> <span class="fu"><a href="../reference/interactivity.html">interactivity</a></span><span class="op">(</span><span class="va">linkingGroup</span>, <span class="va">linkingKey</span>, <span class="va">linkedStates</span>, <span class="va">sync</span>,  <span class="co"># linking</span>
                <span class="va">active</span>, <span class="va">activeGeomLayers</span>,                      <span class="co"># active</span>
                <span class="va">selected</span>, <span class="va">selectBy</span>, <span class="va">selectionLogic</span>,            <span class="co"># selection</span>
                <span class="va">layerId</span>, <span class="va">scaleToFun</span>,                           <span class="co"># zoom</span>
                <span class="va">itemLabel</span>,  <span class="va">showItemLabels</span>,                    <span class="co"># hover</span>
                <span class="va">...</span> <span class="op">)</span></code></pre></div>
<p>Set interactive components (e.g. linking, selection, etc) in one clause. All named arguments are as described in the other clauses.</p>
<ul>
<li>
<code>...</code> other named arguments to modify loon plot states. See <code>l_info_states()</code>.</li>
</ul>
<hr>
</div>
</div>
<div id="the-trick-l_ggplot-becomes-ggplot" class="section level1">
<h1 class="hasAnchor">
<a href="#the-trick-l_ggplot-becomes-ggplot" class="anchor"></a>The trick: <code>l_ggplot()</code> becomes <code>ggplot()</code>
</h1>
<p>We began with the recommendation that to have interactive <code>ggplot</code>s, all we need do is replace <code>ggplot()</code> in the grammar by <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code> with all the usual arguments. All clauses of the <code>ggplot</code> grammar can be used as before <strong>plus</strong> the new <strong>interactive clauses</strong>. The result is an <code>l_ggplot</code> that <em>prints</em> as an interactive <code>loon</code> plot <strong>and</strong> <em>plots</em> as a <code>ggplot2</code> plot. The advantage is that using <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code> makes it clear that an ordinary <code>ggplot</code> is not being produced and emphasizes the <strong>loon-ggplot duality</strong>.</p>
<p>The final trick is that, with <code>loon.ggplot</code>, one does not actually need to use <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code>, <strong>simply use <code>ggplot()</code></strong>. If no clauses are interactive, then an ordinary <code>ggplot</code> will be produced; if an interactive clause is added, an <code>l_ggplot</code> will be produced.</p>
<p>For example, the following produces an ordinary <code>ggplot</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ggp</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">airquality</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span><span class="va">Solar.R</span>, <span class="va">Temp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Air quality in New York (1973)"</span><span class="op">)</span>
<span class="co"># which is an ordinary ggplot and prints as one</span>
<span class="va">ggp</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/ordinary%20ggplot-1.png" width="40%" style="display: block; margin: auto;"> Adding an interactive clause, turns the result into an <code>l_ggplot</code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lggp</span> <span class="op">&lt;-</span> <span class="va">ggp</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/linking.html">linking</a></span><span class="op">(</span>linkingGroup <span class="op">=</span> <span class="st">"airquwqality"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/selection.html">selection</a></span><span class="op">(</span>selected <span class="op">=</span> <span class="va">airquality</span><span class="op">$</span><span class="va">Solar.R</span> <span class="op">&lt;</span> <span class="fl">100</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/zoom.html">zoom</a></span><span class="op">(</span>layerId <span class="op">=</span> <span class="fl">1</span>, scaleToFun <span class="op">=</span> <span class="va">l_scaleto_selected</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span>
<span class="co"># which is an interactive loon and prints as one</span>
<span class="va">lggp</span>
<span class="co">#&gt; [1] ".l3.ggplot.plot"</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "l_plot" "loon"</span>
<span class="co"># but plots as a ggplot</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">lggp</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/interactive%20ggplot-1.png" width="40%" style="display: block; margin: auto;"></p>
<p>Note that the interactive effects do not appear in <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot(l_ggp)</a></code>; this is because this is still an <code>l_ggplot</code>. To print the interactive plot, a handle to it must be found, for example using <code>l_getFromPath(".l3.ggplot")</code></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">l_ggp</span> <span class="op">&lt;-</span> <span class="fu">l_getFromPath</span><span class="op">(</span><span class="st">".l3.ggplot"</span><span class="op">)</span>
<span class="co"># Alternatively, the loon plot could have been captured when first</span>
<span class="co"># created by using loon.ggplot(lggp) in stead of print(lggp) as follows</span>
<span class="co"># </span>
<span class="co"># l_ggp &lt;- loon.ggplot(lggp)</span>
<span class="co"># </span>
<span class="co"># Either way, it will look like the following as a grid graphics plot</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">l_ggp</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/print%20the%20interactive%20plot-1.png" width="40%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># and as below when presented as a ggplot</span>
<span class="fu"><a href="../reference/loon.ggplot.html">loon.ggplot</a></span><span class="op">(</span><span class="va">l_ggp</span><span class="op">)</span></code></pre></div>
<p><img src="grammarOfInteractiveGraphics_files/figure-html/print%20the%20interactive%20plot-2.png" width="40%" style="display: block; margin: auto;"></p>
<p>The <strong>final trick</strong> is that either <code><a href="../reference/l_ggplot.html">l_ggplot()</a></code> or <code>ggplot()</code> cam be produce interactive plots using the <code>ggplot</code> grammar.</p>
<p>It’s largely a matter of taste.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Zehao Xu, R. Wayne Oldford.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
